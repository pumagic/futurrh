<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des M√©tiers RH de Demain</title>
    <!-- Biblioth√®ques n√©cessaires -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <!-- Pour l'affichage des ic√¥nes -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous" defer></script>
    <style>
        /* Styles CSS */
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #1e1e1e;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        h1, h2 {
            text-align: center;
            color: #4caf50;
        }

        p.intro {
            text-align: center;
            font-size: 1.1em;
            color: #cccccc;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin: 10px 0;
            font-size: 1.1em;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0 20px 0;
            font-size: 1em;
            border: none;
            border-radius: 5px;
        }

        button {
            display: inline-block;
            margin: 20px 10px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4caf50;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            margin-top: 30px;
            text-align: center;
        }

        canvas {
            max-width: 100%;
            margin: 20px auto;
        }

        .download-btn {
            margin-top: 20px;
            background-color: #36a2eb;
        }

        /* Style pour les questions */
        .question-text {
            color: #ffce56;
            margin-bottom: 15px;
            font-weight: bold;
        }

        /* Style pour les r√©ponses */
        .answer-label {
            margin-left: 10px;
            margin-bottom: 5px;
            display: block;
        }

        /* Masquer toutes les questions par d√©faut */
        .question-container {
            display: none;
        }

        /* Centrer les boutons */
        .navigation-buttons {
            text-align: center;
        }

        /* Style pour la barre de progression */
        .progress-bar {
            width: 100%;
            background-color: #555;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
            height: 25px;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: #4caf50;
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: bold;
        }

        /* Style pour les ic√¥nes des profils */
        .profile-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }

        /* Style pour les r√©sultats des profils */
        .profile-result {
            text-align: left;
            margin-bottom: 30px;
        }

        .profile-result h3 {
            color: #4caf50;
        }

        hr {
            border: 0;
            border-top: 1px solid #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Quel m√©tier RH de demain est fait pour vous ?</h1>
        <p class="intro">
            D√©couvrez √† quel m√©tier RH du futur vous correspondez ! <br>
            Entrez vos informations pour un r√©sultat personnalis√© et partageable üìÑ.
        </p>

        <!-- Formulaire pour le nom et le pr√©nom -->
        <form id="user-form">
            <label for="name">Nom :</label>
            <input type="text" id="name" placeholder="Entrez votre nom" required>
            <label for="surname">Pr√©nom :</label>
            <input type="text" id="surname" placeholder="Entrez votre pr√©nom" required>
            <button type="button" id="start-quiz">Commencer le Quiz</button>
        </form>

        <!-- Zone pour afficher les questions -->
        <form id="quiz-form" style="display:none;">
            <!-- Barre de progression -->
            <div class="progress-bar">
                <div class="progress-bar-fill" id="progress-bar-fill">0%</div>
            </div>

            <div id="question-container"></div>
            <div class="navigation-buttons">
                <button type="button" id="prev-btn" style="display:none;">Pr√©c√©dent</button>
                <button type="button" id="next-btn">Suivant</button>
                <button type="submit" id="submit-btn" style="display:none;">Voir mon r√©sultat</button>
            </div>
        </form>

        <div id="career-goal-form" style="display:none;">
            <label for="career-goal">O√π souhaitez-vous √©voluer dans les RH ? (optionnel)</label>
            <input type="text" id="career-goal" placeholder="D√©crivez vos objectifs de carri√®re">
            <button type="button" id="see-result-btn">Voir mon r√©sultat</button>
        </div>

        <div id="result"></div>
    </div>

    <script>
        // D√©finition des profils (les questions seront ajout√©es ult√©rieurement)
        const profiles = {
            1: "Responsable √âthique de l'IA RH",
            2: "Strat√®ge de la Marque Employeur Digitale",
            3: "Designer d'Exp√©rience Collaborateur",
            4: "Architecte des Talents Augment√©s",
            5: "Analyste RH Pr√©dictif"
        };

        const profilesInfo = {
            "Responsable √âthique de l'IA RH": {
                description: "Vous √™tes le gardien de l'√©thique dans le monde num√©rique des RH ! üõ°Ô∏è Vous veillez √† ce que l'utilisation des technologies respecte les valeurs humaines.",
                sectors: "Grandes entreprises, ONG, institutions publiques",
                missions: "Mettre en place des politiques √©thiques, assurer la conformit√© l√©gale, former les √©quipes aux bonnes pratiques",
                challenges: "√âquilibrer innovation et respect des valeurs, g√©rer les risques li√©s √† l'IA",
                icon: "fas fa-balance-scale"
            },
            "Strat√®ge de la Marque Employeur Digitale": {
                description: "Cr√©atif et connect√©, vous √™tes le magicien qui rend l'entreprise irr√©sistible aux yeux des talents ! üé©‚ú®",
                sectors: "Startups, entreprises technologiques, agences de communication",
                missions: "D√©velopper la pr√©sence en ligne, cr√©er des campagnes attractives, g√©rer les r√©seaux sociaux",
                challenges: "Se d√©marquer dans un march√© comp√©titif, suivre les tendances digitales",
                icon: "fas fa-bullhorn"
            },
            "Designer d'Exp√©rience Collaborateur": {
                description: "Architecte du bonheur au travail, vous cr√©ez des environnements o√π chacun s'√©panouit ! üåü",
                sectors: "Entreprises orient√©es culture d'entreprise, soci√©t√©s de conseil",
                missions: "Am√©liorer l'engagement, organiser des √©v√©nements internes, recueillir le feedback des employ√©s",
                challenges: "Adapter les initiatives aux besoins vari√©s, mesurer l'impact sur la performance",
                icon: "fas fa-users"
            },
            "Architecte des Talents Augment√©s": {
                description: "√Ä la pointe de la technologie, vous √©quipez les collaborateurs d'outils futuristes pour booster leur potentiel ! üöÄ",
                sectors: "Entreprises innovantes, secteurs technologiques, industries 4.0",
                missions: "Int√©grer de nouvelles technologies, former les √©quipes aux outils IA, optimiser les processus",
                challenges: "G√©rer le changement, assurer l'adoption des technologies, maintenir la s√©curit√© des donn√©es",
                icon: "fas fa-robot"
            },
            "Analyste RH Pr√©dictif": {
                description: "Ma√Ætre des donn√©es, vous anticipez les tendances et guidez les d√©cisions strat√©giques ! üìäüîÆ",
                sectors: "Grandes entreprises, cabinets de conseil, institutions financi√®res",
                missions: "Analyser les donn√©es RH, pr√©voir les besoins en recrutement, optimiser les ressources",
                challenges: "Assurer la qualit√© des donn√©es, interpr√©ter correctement les analyses, communiquer les insights",
                icon: "fas fa-chart-line"
            }
        };
const questions = [
    {
        question: "Si vous pouviez avoir un gadget futuriste pour faciliter votre travail RH, lequel choisiriez-vous ?",
        answers: [
            { text: "Un traducteur universel d'√©motions pour mieux comprendre les collaborateurs.", value: 3 },
            { text: "Un casque de r√©alit√© augment√©e pour analyser les donn√©es en temps r√©el.", value: 5 },
            { text: "Un stylo magique qui signe des contrats √©thiques automatiquement.", value: 1 },
            { text: "Une baguette d'innovation pour cr√©er des id√©es novatrices instantan√©ment.", value: 2 },
            { text: "Un robot assistant pour automatiser les t√¢ches r√©p√©titives.", value: 4 }
        ]
    },
    {
        question: "Lors d'une journ√©e de travail id√©ale, vous √™tes le plus enthousiaste √† l'id√©e de :",
        answers: [
            { text: "Organiser un atelier collaboratif pour renforcer l'esprit d'√©quipe.", value: 3 },
            { text: "Explorer de nouvelles technologies pour am√©liorer les processus RH.", value: 4 },
            { text: "Analyser les tendances du march√© pour anticiper les besoins futurs.", value: 5 },
            { text: "Trouver des solutions cr√©atives √† des d√©fis complexes.", value: 2 },
            { text: "Assurer que toutes les pratiques sont align√©es avec les valeurs √©thiques.", value: 1 }
        ]
    },
    {
        question: "Si vous √©tiez responsable d'une initiative RH, laquelle lanceriez-vous en premier ?",
        answers: [
            { text: "Un programme d'innovation pour encourager les id√©es nouvelles.", value: 2 },
            { text: "Une plateforme collaborative pour am√©liorer la communication interne.", value: 3 },
            { text: "Un audit √©thique pour garantir la transparence des processus.", value: 1 },
            { text: "Une mise √† jour technologique pour automatiser les t√¢ches r√©p√©titives.", value: 4 },
            { text: "Une analyse pr√©dictive pour optimiser le recrutement.", value: 5 }
        ]
    },
    {
        question: "Lors d'une r√©union, vous √™tes celui qui :",
        answers: [
            { text: "Veille √† ce que toutes les voix soient entendues et respect√©es.", value: 1 },
            { text: "Propose des id√©es innovantes qui sortent des sentiers battus.", value: 2 },
            { text: "Facilite la collaboration entre les participants.", value: 3 },
            { text: "Pr√©sente des donn√©es et des analyses pour √©tayer les d√©cisions.", value: 5 },
            { text: "Sugg√®re des outils technologiques pour am√©liorer l'efficacit√©.", value: 4 }
        ]
    },
    {
        question: "Face √† un nouveau d√©fi professionnel, vous pr√©f√©rez :",
        answers: [
            { text: "Consulter les donn√©es pass√©es pour prendre une d√©cision √©clair√©e.", value: 5 },
            { text: "Brainstormer avec l'√©quipe pour trouver des solutions collaboratives.", value: 3 },
            { text: "Chercher des moyens innovants de le surmonter.", value: 2 },
            { text: "V√©rifier que les actions envisag√©es respectent les normes √©thiques.", value: 1 },
            { text: "Rechercher des outils technologiques pouvant aider.", value: 4 }
        ]
    },
    {
        question: "Votre succ√®s professionnel est d√ª principalement √† :",
        answers: [
            { text: "Votre capacit√© √† innover constamment.", value: 2 },
            { text: "Votre engagement envers l'√©thique et l'int√©grit√©.", value: 1 },
            { text: "Votre aptitude √† rassembler les gens.", value: 3 },
            { text: "Votre expertise en technologie moderne.", value: 4 },
            { text: "Votre talent pour analyser et interpr√©ter les donn√©es.", value: 5 }
        ]
    },
    {
        question: "Si vous deviez √©crire un livre sur les RH, il s'intitulerait :",
        answers: [
            { text: "¬´ L'√âthique au C≈ìur des RH Modernes ¬ª", value: 1 },
            { text: "¬´ Innover pour Transformer les RH ¬ª", value: 2 },
            { text: "¬´ L'Art de la Collaboration en Entreprise ¬ª", value: 3 },
            { text: "¬´ Les Technologies qui Red√©finissent les RH ¬ª", value: 4 },
            { text: "¬´ Pr√©dire l'Avenir des RH gr√¢ce aux Donn√©es ¬ª", value: 5 }
        ]
    },
    {
        question: "Un coll√®gue vous demande conseil, vous √™tes le plus susceptible de lui offrir :",
        answers: [
            { text: "Des insights bas√©s sur des analyses de donn√©es pr√©cises.", value: 5 },
            { text: "Une solution technologique pour faciliter son travail.", value: 4 },
            { text: "Un soutien pour d√©velopper une id√©e innovante.", value: 2 },
            { text: "Une perspective √©thique pour guider sa d√©cision.", value: 1 },
            { text: "Une opportunit√© de collaborer pour r√©soudre son probl√®me.", value: 3 }
        ]
    },
    {
        question: "Votre environnement de travail id√©al est :",
        answers: [
            { text: "Un espace high-tech avec les derni√®res innovations.", value: 4 },
            { text: "Un lieu ouvert favorisant les √©changes et la collaboration.", value: 3 },
            { text: "Un bureau calme o√π vous pouvez analyser des donn√©es en profondeur.", value: 5 },
            { text: "Un environnement dynamique encourageant la cr√©ativit√©.", value: 2 },
            { text: "Un espace refl√©tant les valeurs √©thiques de l'entreprise.", value: 1 }
        ]
    },
    {
        question: "Si vous pouviez assister √† une conf√©rence, vous choisiriez :",
        answers: [
            { text: "¬´ Les enjeux √©thiques de l'IA dans les RH ¬ª", value: 1 },
            { text: "¬´ Innovations disruptives dans le monde du travail ¬ª", value: 2 },
            { text: "¬´ La collaboration comme levier de performance ¬ª", value: 3 },
            { text: "¬´ Technologies √©mergentes pour les professionnels RH ¬ª", value: 4 },
            { text: "¬´ L'analytique pr√©dictive au service des RH ¬ª", value: 5 }
        ]
    },
    {
        question: "Lorsque vous travaillez sur un projet, vous appr√©ciez le plus :",
        answers: [
            { text: "Garantir que chaque √©tape est en accord avec les principes √©thiques.", value: 1 },
            { text: "Introduire des id√©es novatrices pour am√©liorer le r√©sultat.", value: 2 },
            { text: "Collaborer √©troitement avec une √©quipe multidisciplinaire.", value: 3 },
            { text: "Utiliser des outils technologiques pour gagner en efficacit√©.", value: 4 },
            { text: "Analyser les donn√©es pour optimiser les d√©cisions.", value: 5 }
        ]
    },
    {
        question: "Votre devise professionnelle pourrait √™tre :",
        answers: [
            { text: "¬´ L'innovation est la cl√© du progr√®s. ¬ª", value: 2 },
            { text: "¬´ Ensemble, nous allons plus loin. ¬ª", value: 3 },
            { text: "¬´ La technologie au service de l'humain. ¬ª", value: 4 },
            { text: "¬´ Les donn√©es racontent une histoire, sachons l'√©couter. ¬ª", value: 5 },
            { text: "¬´ L'√©thique guide chaque action. ¬ª", value: 1 }
        ]
    },
    {
        question: "En cas de d√©saccord au sein de l'√©quipe, vous √™tes celui qui :",
        answers: [
            { text: "Cherche une solution √©thique acceptable pour tous.", value: 1 },
            { text: "Propose une id√©e innovante pour sortir de l'impasse.", value: 2 },
            { text: "Facilite la communication pour trouver un terrain d'entente.", value: 3 },
            { text: "Sugg√®re un outil technologique pour aider √† r√©soudre le probl√®me.", value: 4 },
            { text: "Analyse les causes profondes √† l'aide de donn√©es.", value: 5 }
        ]
    },
    {
        question: "Pour vous, le futur des RH est :",
        answers: [
            { text: "Un √©quilibre entre technologie et humanit√©.", value: 1 },
            { text: "Un terrain fertile pour l'innovation constante.", value: 2 },
            { text: "Une √®re o√π la collaboration est au c≈ìur de tout.", value: 3 },
            { text: "Une transformation gr√¢ce aux avanc√©es technologiques.", value: 4 },
            { text: "Une gestion anticipative bas√©e sur les donn√©es.", value: 5 }
        ]
    },
    {
        question: "Si vous pouviez ma√Ætriser instantan√©ment une nouvelle comp√©tence, ce serait :",
        answers: [
            { text: "La capacit√© √† analyser de vastes ensembles de donn√©es.", value: 5 },
            { text: "La ma√Ætrise des derni√®res technologies RH.", value: 4 },
            { text: "L'art de f√©d√©rer des √©quipes diverses.", value: 3 },
            { text: "Un g√©nie cr√©atif pour innover sans cesse.", value: 2 },
            { text: "Une expertise approfondie en √©thique professionnelle.", value: 1 }
        ]
    },
    {
        question: "Lors d'un entretien avec un candidat, vous √™tes attentif surtout √† :",
        answers: [
            { text: "Son alignement avec les valeurs et l'√©thique de l'entreprise.", value: 1 },
            { text: "Sa capacit√© √† apporter des id√©es innovantes.", value: 2 },
            { text: "Ses aptitudes √† travailler en √©quipe.", value: 3 },
            { text: "Ses comp√©tences techniques avanc√©es.", value: 4 },
            { text: "Sa compr√©hension des tendances du secteur.", value: 5 }
        ]
    },
    {
        question: "Pour vous d√©tendre apr√®s le travail, vous aimez :",
        answers: [
            { text: "Lire des articles sur les innovations futures.", value: 2 },
            { text: "Participer √† des jeux collaboratifs en ligne.", value: 3 },
            { text: "Explorer de nouvelles applications technologiques.", value: 4 },
            { text: "Analyser des statistiques sportives ou √©conomiques.", value: 5 },
            { text: "Engager des discussions sur des sujets √©thiques.", value: 1 }
        ]
    },
    {
        question: "Votre r√¥le lors d'un projet inter-services est de :",
        answers: [
            { text: "Assurer que les objectifs respectent les normes √©thiques.", value: 1 },
            { text: "Stimuler l'innovation au sein de l'√©quipe.", value: 2 },
            { text: "Faciliter la communication entre les diff√©rentes parties.", value: 3 },
            { text: "Introduire des solutions technologiques adapt√©es.", value: 4 },
            { text: "Fournir des analyses pour orienter les d√©cisions.", value: 5 }
        ]
    },
    {
        question: "Vous consid√©rez que le principal atout d'une entreprise est :",
        answers: [
            { text: "Son engagement √©thique.", value: 1 },
            { text: "Sa capacit√© √† innover.", value: 2 },
            { text: "La force de sa collaboration interne.", value: 3 },
            { text: "Son utilisation avanc√©e de la technologie.", value: 4 },
            { text: "Sa ma√Ætrise des donn√©es et des analyses.", value: 5 }
        ]
    },
    {
        question: "Lors d'une formation, vous √™tes le plus int√©ress√© par :",
        answers: [
            { text: "Les ateliers pratiques favorisant la collaboration.", value: 3 },
            { text: "Les sessions sur les derni√®res tendances technologiques.", value: 4 },
            { text: "Les discussions sur les dilemmes √©thiques.", value: 1 },
            { text: "Les activit√©s stimulant la cr√©ativit√©.", value: 2 },
            { text: "Les modules sur l'analyse de donn√©es avanc√©e.", value: 5 }
        ]
    },
    {
        question: "Votre m√©thode pr√©f√©r√©e pour r√©soudre un probl√®me est :",
        answers: [
            { text: "Rechercher des solutions innovantes et originales.", value: 2 },
            { text: "Collaborer avec l'√©quipe pour trouver une solution commune.", value: 3 },
            { text: "Utiliser des outils technologiques pour faciliter la r√©solution.", value: 4 },
            { text: "Analyser toutes les donn√©es disponibles pour √©clairer le choix.", value: 5 },
            { text: "S'assurer que la solution est en accord avec les valeurs √©thiques.", value: 1 }
        ]
    },
    {
        question: "Si vous deviez choisir un animal pour repr√©senter votre style de travail, ce serait :",
        answers: [
            { text: "Le dauphin, pour son intelligence et sa collaboration.", value: 3 },
            { text: "Le hibou, symbole de sagesse et d'analyse.", value: 5 },
            { text: "Le lion, leader courageux et √©thique.", value: 1 },
            { text: "Le singe, pour son ing√©niosit√© et son innovation.", value: 2 },
            { text: "Le gu√©pard, rapide et agile gr√¢ce √† la technologie.", value: 4 }
        ]
    }
];
        // Reste du code JavaScript pour g√©rer le quiz
        let currentQuestionIndex = 0;
        const userAnswers = [];

        const userForm = document.getElementById('user-form');
        const quizForm = document.getElementById('quiz-form');
        const questionContainer = document.getElementById('question-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const startQuizBtn = document.getElementById('start-quiz');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const careerGoalForm = document.getElementById('career-goal-form');
        const seeResultBtn = document.getElementById('see-result-btn');

        startQuizBtn.addEventListener('click', () => {
            // V√©rifier si les champs Nom et Pr√©nom sont remplis
            const name = document.getElementById('name').value.trim();
            const surname = document.getElementById('surname').value.trim();

            if (name === '' || surname === '') {
                alert('Veuillez remplir votre nom et pr√©nom.');
                return;
            }

            userForm.style.display = 'none';
            quizForm.style.display = 'block';
            showQuestion();
            updateProgressBar();
        });

        function showQuestion() {
            // Pour le moment, pas de questions √† afficher
            if (questions.length === 0) {
                questionContainer.innerHTML = '<p>Aucune question disponible pour le moment.</p>';
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'none';
                prevBtn.style.display = 'none';
                return;
            }

            const q = questions[currentQuestionIndex];
            questionContainer.innerHTML = `
                <p class="question-text">Question ${currentQuestionIndex + 1}/${questions.length}: ${q.question}</p>
                ${q.answers.map((a, i) => `
                    <label class="answer-label">
                        <input type="radio" name="answer" value="${a.value}" ${userAnswers[currentQuestionIndex] == a.value ? 'checked' : ''}>
                        ${a.text}
                    </label>
                `).join('<br>')}
            `;

            // G√©rer l'affichage des boutons
            prevBtn.style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';
            nextBtn.style.display = currentQuestionIndex < questions.length - 1 ? 'inline-block' : 'none';
            submitBtn.style.display = currentQuestionIndex === questions.length - 1 ? 'inline-block' : 'none';
        }

        function updateProgressBar() {
            const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
            progressBarFill.style.width = `${progressPercent}%`;
            progressBarFill.textContent = `${Math.round(progressPercent)}%`;
        }

        prevBtn.addEventListener('click', () => {
            saveAnswer();
            currentQuestionIndex--;
            showQuestion();
            updateProgressBar();
        });

        nextBtn.addEventListener('click', () => {
            if (!saveAnswer()) return;
            currentQuestionIndex++;
            showQuestion();
            updateProgressBar();
        });

        function saveAnswer() {
            const selectedOption = document.querySelector('input[name="answer"]:checked');
            if (selectedOption) {
                userAnswers[currentQuestionIndex] = selectedOption.value;
                return true;
            } else {
                alert('Veuillez s√©lectionner une r√©ponse.');
                return false;
            }
        }

        quizForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!saveAnswer()) return;

            quizForm.style.display = 'none';
            careerGoalForm.style.display = 'block';
        });

        seeResultBtn.addEventListener('click', () => {
            const careerGoal = document.getElementById('career-goal').value.trim();
            calculateResults(careerGoal);
        });

        function calculateResults(careerGoal) {
            const scores = {
                "Responsable √âthique de l'IA RH": 0, // value: 1
                "Strat√®ge de la Marque Employeur Digitale": 0, // value: 2
                "Designer d'Exp√©rience Collaborateur": 0, // value: 3
                "Architecte des Talents Augment√©s": 0, // value: 4
                "Analyste RH Pr√©dictif": 0 // value: 5
            };

            userAnswers.forEach((value) => {
                const val = parseInt(value);
                const profileKey = profiles[val];
                scores[profileKey]++;
            });

            const totalQuestions = questions.length || 1; // √âviter division par z√©ro
            Object.keys(scores).forEach((key) => {
                scores[key] = (scores[key] / totalQuestions) * 100;
            });

            careerGoalForm.style.display = 'none';

            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = `
                <h2>R√©sultats du Test</h2>
                <div id="profile-results"></div>
                <canvas id="resultChart" width="400" height="400"></canvas>
                <button class="download-btn" id="download-pdf">T√©l√©charger le R√©sultat</button>
            `;

            displayProfileResults(scores);

            const ctx = document.getElementById("resultChart").getContext("2d");
            const chart = new Chart(ctx, {
                type: "bar",
                data: {
                    labels: Object.keys(scores),
                    datasets: [{
                        label: "Correspondance (%)",
                        data: Object.values(scores),
                        backgroundColor: ["#ffce56", "#36a2eb", "#ff6384", "#4caf50", "#9966ff"]
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });

            document.getElementById("download-pdf").addEventListener("click", () => {
                generatePDF(scores, careerGoal);
            });
        }

        function displayProfileResults(scores) {
            const profileResultsDiv = document.getElementById("profile-results");
            const sortedProfiles = Object.entries(scores).sort((a, b) => b[1] - a[1]);

            sortedProfiles.forEach(([profile, score]) => {
                const info = profilesInfo[profile];
                profileResultsDiv.innerHTML += `
                    <div class="profile-result">
                        <i class="profile-icon ${info.icon}"></i>
                        <h3>${profile} - ${score.toFixed(2)}%</h3>
                        <p>${info.description}</p>
                        <p><strong>Secteurs :</strong> ${info.sectors}</p>
                        <p><strong>Missions :</strong> ${info.missions}</p>
                        <p><strong>D√©fis :</strong> ${info.challenges}</p>
                    </div>
                    <hr>
                `;
            });
        }

        function generatePDF(scores, careerGoal) {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();

            const name = document.getElementById('name').value;
            const surname = document.getElementById('surname').value;

            // Personnalisation du PDF
            // Ajouter un fond color√©
            pdf.setFillColor(18, 18, 18); // Couleur de fond sombre
            pdf.rect(0, 0, pdf.internal.pageSize.width, pdf.internal.pageSize.height, 'F');

            pdf.setTextColor(255, 255, 255); // Texte en blanc

            pdf.setFontSize(22);
            pdf.text("R√©sultats du Test - M√©tiers RH de Demain", pdf.internal.pageSize.width / 2, 20, { align: 'center' });

            pdf.setFontSize(16);
            pdf.text(`Nom : ${name}`, 10, 30);
            pdf.text(`Pr√©nom : ${surname}`, 10, 40);
            pdf.text("Ann√©e : 2024", 10, 50);

            if (careerGoal) {
                pdf.text(`Objectif de carri√®re : ${careerGoal}`, 10, 60);
            }

            let yPosition = careerGoal ? 70 : 60;

            const sortedProfiles = Object.entries(scores).sort((a, b) => b[1] - a[1]);

            sortedProfiles.forEach(([profile, score]) => {
                const info = profilesInfo[profile];

                pdf.setFontSize(14);
                pdf.text(`${profile}: ${score.toFixed(2)}%`, 10, yPosition);
                yPosition += 8;
                pdf.setFontSize(12);
                pdf.text(`Description: ${info.description}`, 10, yPosition, { maxWidth: 190 });
                yPosition += 15;
                pdf.text(`Secteurs: ${info.sectors}`, 10, yPosition, { maxWidth: 190 });
                yPosition += 10;
                pdf.text(`Missions: ${info.missions}`, 10, yPosition, { maxWidth: 190 });
                yPosition += 15;
                pdf.text(`D√©fis: ${info.challenges}`, 10, yPosition, { maxWidth: 190 });
                yPosition += 20;

                // V√©rifier si on doit ajouter une nouvelle page
                if (yPosition > pdf.internal.pageSize.height - 30) {
                    pdf.addPage();
                    pdf.setFillColor(18, 18, 18);
                    pdf.rect(0, 0, pdf.internal.pageSize.width, pdf.internal.pageSize.height, 'F');
                    pdf.setTextColor(255, 255, 255);
                    yPosition = 20;
                }
            });

            // Ajouter le graphique
            const canvas = document.getElementById("resultChart");
            const chartImage = canvas.toDataURL("image/jpeg", 1.0);

            if (yPosition + 100 > pdf.internal.pageSize.height) {
                pdf.addPage();
                pdf.setFillColor(18, 18, 18);
                pdf.rect(0, 0, pdf.internal.pageSize.width, pdf.internal.pageSize.height, 'F');
                pdf.setTextColor(255, 255, 255);
                yPosition = 20;
            }

            pdf.addImage(chartImage, "JPEG", 10, yPosition, 180, 100);
            yPosition += 110;

            // Ajouter le texte en bas du PDF
            pdf.setFontSize(12);
            pdf.text("IDRH - Iga√´l Derrida", 10, pdf.internal.pageSize.height - 10);

            pdf.save("resultats_test_metiers_rh.pdf");
        }
    </script>
</body>
</html>
